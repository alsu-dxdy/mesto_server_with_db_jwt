#### mesto_server_with_db_jwt
##### https://github.com/alsu-dxdy/mesto_server_with_db_jwt

Version v0.0.2
Description: Creating server with db and authentication
Для вадидации ссылок используется сторонний валидатор:
##### https://www.npmjs.com/package/validator

#### Инструкция по сборке:

1) Запустить в разных терминалах сервер MongoDB:
<li> mongod --dbpath  ../data/db
<li> mongo
2) Запустить сервер на localhost:3000 с хот релоудом командой:
<li> npm run dev

Точка входа: app.js 
 
Node.js приложение подключается к серверу Mongo по адресу mongodb://localhost:27017/mestodb;

<li> в схеме пользователя есть обязательные email и password;
<li> поле email уникально и валидируется;
<li> в контроллере createUser почта и хеш пароля записываются в базу;
<li> есть контроллер login, он проверяет, полученные в теле запроса почту и пароль;
<li> если почта и пароль верные, контроллер login создаёт JWT, в пейлоуд которого записано свойство _id с идентификатором пользователя; срок жизни токена — 7 дней;
<li> если почта и пароль верные, контроллер login возвращает созданный токен в ответе;
<li> если почта и пароль не верные, контроллер login возвращает ошибку 401;
<li> в app.js есть обработчики POST-запросов на роуты /signin и /signup;
<li> есть файл middlewares/auth.js, в нём мидлвэр для проверки JWT;
<li> при правильном JWT авторизационный мидлвэр добавляет в объект запроса пейлоуд и пропускает запрос дальше;
<li> при неправильном JWT авторизационный мидвэр возвращает ошибку 401;
<li> все роуты, кроме /signin и /signup, защищены авторизацией;
<li> удалён хардкод req.user из самостоятельного проекта предыдущего спринта;
<li> пользователь не может удалить карточку, которую он не создавал;
<li> API не возвращает хеш пароля;




 